<!doctype html>
<html lang="it">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Dettaglio libro - STOOK</title>
<link href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&display=swap" rel="stylesheet">
<style>
:root{ --bg:#ffffff; --text:#000000; --card-radius:12px; }
*{box-sizing:border-box;margin:0;padding:0}
body{ background:var(--bg); color:var(--text); font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif; padding:1rem; }

/* Titolo */
h1{ font-family:'Luckiest Guy', cursive; text-align:center; margin:1rem 0; }

/* Contenitore */
.container{ max-width:800px; margin:0 auto; background:#fff; padding:1.5rem; border-radius:var(--card-radius); box-shadow:0 2px 8px rgba(0,0,0,0.1); }
.book-title{ font-size:1.5rem; font-weight:600; margin-bottom:.5rem; }
.price{ font-size:1.2rem; color:#444; margin-bottom:1rem; }
.details{ margin-bottom:1rem; }
.contact-btn{ background:#000; color:#fff; border:none; padding:.8rem 1.2rem; border-radius:8px; cursor:pointer; font-size:1rem; }
.contact-btn:hover{ opacity:.9; }

/* Modale login */
.modal{
  display:none;               /* ‚Üê resta SOLO questo */
  position:fixed; top:0; left:0; width:100%; height:100%;
  background:rgba(0,0,0,0.5);
  /* NON rimettere display:flex qui */
}
.modal-content{
  background:#fff; padding:2rem; border-radius:12px; width:90%; max-width:400px;
  box-shadow:0 4px 12px rgba(0,0,0,0.2);
}
.modal-content h2{ margin-bottom:1rem; font-family:'Luckiest Guy', cursive; }
.modal-content input{ width:100%; padding:.5rem; margin-bottom:.75rem; border:1px solid #ccc; border-radius:6px; }
.modal-content button{
  width:100%; padding:.7rem; border:none; border-radius:8px;
  background:#000; color:#fff; font-size:1rem; cursor:pointer;
}
.modal-content button:hover{ opacity:.9; }
</style>
</head>
<body>

<h1>STOOK</h1>

<!-- Contenitore dettaglio -->
<div class="container" id="bookDetail" style="display:none;">
  <div class="book-title" id="bookTitle"></div>
  <div class="price" id="bookPrice"></div>
  <div class="details" id="bookCondition"></div>
  <div class="details" id="bookDescription"></div>
  <button class="contact-btn" id="contactBtn">Contatta il venditore</button>
</div>

<!-- Modale login -->
<div class="modal" id="loginModal">
  <div class="modal-content">
    <h2>Crea un account o accedi</h2>
    <input type="text" id="usernameInput" placeholder="Username">
    <input type="password" id="passwordInput" placeholder="Password">
    <button id="loginBtn">Accedi</button>
  </div>
</div>

<script>
// === Dati demo ===
const libriDemo = {
  1: { titolo:"Libro A", prezzo:"8 ‚Ç¨",  condizione:"Buono",      descrizione:"Manuale usato di economia, ottime condizioni." },
  2: { titolo:"Libro B", prezzo:"15 ‚Ç¨", condizione:"Ottimo",     descrizione:"Libro di diritto, evidenziato ma ben tenuto." },
  3: { titolo:"Libro C", prezzo:"25 ‚Ç¨", condizione:"Come nuovo", descrizione:"Edizione aggiornata, praticamente nuovo." }
};

// === Recupero ID dalla URL ===
const params = new URLSearchParams(window.location.search);
const id = params.get("id");
const book = libriDemo[id];

// === Elementi ===
const bookDetail = document.getElementById("bookDetail");
const loginModal = document.getElementById("loginModal");
const loginBtn = document.getElementById("loginBtn");
const usernameInput = document.getElementById("usernameInput");
const passwordInput = document.getElementById("passwordInput");

// === Login check ===
function isLoggedIn(){ return localStorage.getItem("user"); }
function showLoginModal(){ loginModal.style.display="flex"; }
function hideLoginModal(){ loginModal.style.display="none"; }

// === Render dettaglio ===
function renderBookDetail(){
  if(!book){ document.body.innerHTML="<p>Annuncio non trovato.</p>"; return; }
  document.getElementById("bookTitle").textContent = book.titolo;
  document.getElementById("bookPrice").textContent = "üí∂ " + book.prezzo;
  document.getElementById("bookCondition").textContent = "üìö " + book.condizione;
  document.getElementById("bookDescription").textContent = book.descrizione;
  bookDetail.style.display="block";
}

// === Avvio ===
if(isLoggedIn()){
  renderBookDetail();
} else {
  showLoginModal();
}

// === Login ===
loginBtn.addEventListener("click",()=>{
  const user = usernameInput.value.trim();
  if(user && passwordInput.value){
    localStorage.setItem("user", user);
    hideLoginModal();
    renderBookDetail();
  } else {
    alert("Inserisci username e password");
  }
});
</script>
</body>
</html>
